{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'accounting:reports_index' %}">–û—Ç—á–µ—Ç—ã</a>
    &rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<form method="get" style="margin-bottom: 20px;">
    <fieldset class="module aligned">
        <div class="form-row">
            <div>
                <label for="id_from_date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
                <input type="date" name="from_date" id="id_from_date" value="{{ from_date|date:'Y-m-d' }}" required>
            </div>
            <div>
                <label for="id_to_date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
                <input type="date" name="to_date" id="id_to_date" value="{{ to_date|date:'Y-m-d' }}" required>
            </div>
            <div>
                <label for="id_cash_register">–ö–∞—Å—Å–∞:</label>
                <select name="cash_register" id="id_cash_register">
                    <option value="">–í—Å–µ</option>
                    {% for cr in cash_registers %}
                    <option value="{{ cr.id }}" {% if selected_cash_register == cr.id %}selected{% endif %}>{{ cr.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="id_currency">–í–∞–ª—é—Ç–∞:</label>
                <select name="currency" id="id_currency">
                    <option value="">–í—Å–µ</option>
                    {% for curr in currencies %}
                    <option value="{{ curr.id }}" {% if selected_currency == curr.id %}selected{% endif %}>{{ curr.code }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <input type="submit" value="–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å" class="default">
            </div>
        </div>
    </fieldset>
</form>

<div class="module">
    {% for expense_item, data in items_data.items %}
    <h3>{{ expense_item.name }}</h3>
    <table style="width: 100%; margin-bottom: 20px;">
        <thead>
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–î–æ–∫—É–º–µ–Ω—Ç</th>
                <th style="text-align: right;">–°—É–º–º–∞</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            </tr>
        </thead>
        <tbody>
            {% for item in data.items %}
            <tr>
                <td>{{ item.date|date:"d.m.Y" }}</td>
                <td>{{ item.report.number }}</td>
                <td style="text-align: right;">{{ item.amount|floatformat:2 }} {{ item.report.currency.code }}</td>
                <td>{{ item.description|truncatewords:10 }}</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr style="font-weight: bold;">
                <td colspan="2">–ò—Ç–æ–≥–æ –ø–æ —Å—Ç–∞—Ç—å–µ:</td>
                <td style="text-align: right;">{{ data.total|floatformat:2 }}</td>
                <td></td>
            </tr>
        </tfoot>
    </table>
    {% empty %}
    <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</p>
    {% endfor %}
</div>

<div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 4px;">
    <a href="{% url 'accounting:reports_index' %}" class="button" style="margin-right: 10px;">‚Üê –ö —Å–ø–∏—Å–∫—É –æ—Ç—á–µ—Ç–æ–≤</a>
    <a href="{% url 'admin:index' %}" class="button" style="background-color: #417690; color: white;">üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
</div>
{% endblock %}


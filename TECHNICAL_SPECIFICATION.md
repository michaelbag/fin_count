# Техническое задание
## Система финансового учета (fin_count)

**Версия документа:** 1.3  
**Дата создания:** 2024  
**Дата обновления:** 2024  
**Проект:** fin_count  
**Версия проекта:** 0.0.1  
**Статус проекта:** В разработке документации

---

## 1. Общие сведения

### 1.1. Назначение системы
Система предназначена для ведения финансового учета с поддержкой:
- Учета остатков денежных средств по кассам в различных валютах
- Учета остатков по выданным авансам сотрудникам
- Оформления операций документами:
  - Оприходование денег
  - Расход денег
  - Выдача денег подотчетному лицу (сотруднику)
  - Авансовые отчеты по фактическим тратам сотрудника
  - Возврат денег сотрудником
- Ведения общего журнала операций со ссылками на документы, физические лица, валюты, статьи расходов и доходов
- Ведения справочника статей расходов и доходов

### 1.2. Технологический стек
- **Backend:** Django 5.2.8
- **База данных:** 
  - SQLite (для разработки)
  - PostgreSQL (для промышленного применения)
- **Язык:** Python 3.11
- **Интерфейс:** Django Admin + пользовательские формы

### 1.3. Требования к системе
- Python 3.11+
- Django 5.2.8
- База данных:
  - SQLite (для разработки) - встроена в Python
  - PostgreSQL (для промышленного применения) - требуется установка и настройка
- Поддержка мультивалютного учета
- Режим отладки для разработки
- Доступ на всех IP-адресах рабочего места

---

## 2. Модели данных

### 2.1. Абстрактные базовые модели

В системе используются 4 абстрактные базовые модели, которые определяют общую структуру и поведение для всех объектов системы:

#### 2.1.1. BaseDocument (Документ)
**Назначение:** Базовая модель для всех документов системы

**Поля:**
- `number` (CharField, max_length=50, unique=True) - Номер документа
- `date` (DateTimeField) - Дата документа (устанавливается автоматически при сохранении, если не указана)
- `is_posted` (BooleanField, default=False) - Статус "Проведен" (отражен в учете)
- `is_deleted` (BooleanField, default=False) - Пометка на удаление
- `created_at` (DateTimeField, auto_now_add=True) - Дата создания
- `updated_at` (DateTimeField, auto_now=True) - Дата обновления

**Методы:**
- `save()` - Автоматически устанавливает дату на текущий момент, если она не указана

**Наследуют:**
- IncomeDocument (Оприходование денег)
- ExpenseDocument (Расход денег)
- AdvancePayment (Выдача подотчетных средств)
- AdvanceReport (Авансовый отчет)
- CashTransfer (Перемещение между кассами)
- CurrencyConversion (Конвертация валют)

---

#### 2.1.2. BaseOperationRegister (Регистр операций)
**Назначение:** Базовая модель для регистра операций (журнала операций)

**Поля:**
- `date` (DateTimeField) - Дата операции
- `transaction_type` (CharField, choices) - Тип операции
- `amount` (DecimalField) - Сумма операции
- `description` (TextField, blank=True) - Описание операции
- `created_at` (DateTimeField, auto_now_add=True) - Дата создания записи
- `created_by` (ForeignKey, User, null=True, blank=True) - Создано пользователем

**Особенности:**
- Регистр операций не имеет остатков, только движения
- Каждая операция отражает факт хозяйственной деятельности
- Операции привязываются к документам через ForeignKey

**Наследуют:**
- Transaction (Операция / Журнал операций)

---

#### 2.1.3. BaseAccumulationRegister (Регистр накоплений)
**Назначение:** Базовая модель для регистров накоплений (остатков)

**Поля:**
- `date` (DateTimeField) - Дата записи
- `period` (DateField) - Период (для расчета остатков на дату)
- `created_at` (DateTimeField, auto_now_add=True) - Дата создания записи

**Особенности:**
- Регистр накоплений хранит остатки и обороты
- Остатки рассчитываются на основе операций из регистра операций
- Поддерживает расчет остатков на произвольную дату

**Использование:**
- Остатки по кассам (CashRegister.get_balance)
- Остатки по выданным авансам (Employee.get_advance_balance)
- Остатки рассчитываются динамически на основе операций из регистра операций

---

#### 2.1.4. BaseReference (Справочники)
**Назначение:** Базовая модель для всех справочников системы

**Поля:**
- `name` (CharField, max_length=200) - Название элемента справочника
- `code` (CharField, max_length=50, unique=True, blank=True, null=True) - Код элемента (опционально)
- `description` (TextField, blank=True) - Описание
- `is_active` (BooleanField, default=True) - Активен
- `created_at` (DateTimeField, auto_now_add=True) - Дата создания
- `updated_at` (DateTimeField, auto_now=True) - Дата обновления

**Особенности:**
- Справочники содержат относительно статичную информацию
- Элементы справочников используются в документах и операциях
- Поддержка иерархической структуры через поле `parent` (опционально)

**Наследуют:**
- Currency (Валюта)
- CashRegister (Касса)
- IncomeExpenseItem (Статья доходов/расходов)
- Employee (Сотрудник)

---

### 2.2. Справочники

Все справочники наследуются от `BaseReference` и дополняют базовую модель специфичными полями.

#### 2.2.1. Currency (Валюта)
**Назначение:** Справочник валют

**Наследует:** BaseReference

**Дополнительные поля:**
- `code` (CharField, max_length=3, unique=True) - Код валюты (ISO 4217) (переопределяет code из BaseReference)
- `symbol` (CharField, max_length=10) - Символ валюты

**Требования:**
- Код валюты должен быть уникальным
- По умолчанию валюта активна

---

#### 2.2.2. CashRegister (Касса)
**Назначение:** Справочник касс

**Наследует:** BaseReference

**Дополнительные поля:**
- (используются поля из BaseReference: name, description, is_active)

**Методы:**
- `get_balance(currency, date=None)` - Получить остаток по кассе в указанной валюте на определенную дату (использует регистр накоплений)

**Требования:**
- Должна быть возможность расчета остатков по каждой валюте
- Остатки рассчитываются на основе операций из регистра операций (Transaction)

---

#### 2.2.3. IncomeExpenseItem (Статья доходов/расходов)
**Назначение:** Справочник статей доходов и расходов

**Наследует:** BaseReference

**Дополнительные поля:**
- `type` (CharField, choices=['income', 'expense']) - Тип: Доход/Расход
- `parent` (ForeignKey, self, null=True, blank=True) - Родительская статья (для иерархии)

**Требования:**
- Поддержка иерархической структуры (родитель-потомок)
- Разделение на доходы и расходы

---

#### 2.2.4. Employee (Сотрудник)
**Назначение:** Справочник сотрудников

**Наследует:** BaseReference

**Дополнительные поля:**
- `first_name` (CharField, max_length=100) - Имя
- `last_name` (CharField, max_length=100) - Фамилия
- `middle_name` (CharField, max_length=100, blank=True) - Отчество
- `position` (CharField, max_length=200, blank=True) - Должность

**Методы:**
- `full_name` (property) - Полное имя сотрудника (формируется из first_name, last_name, middle_name)
- `get_advance_balance(currency)` - Получить остаток подотчетных средств в указанной валюте (использует регистр накоплений)

---

### 2.3. Документы

Все документы наследуются от `BaseDocument` и дополняют базовую модель специфичными полями и бизнес-логикой.

#### 2.3.1. AdvancePayment (Выдача подотчетных средств)
**Назначение:** Документ выдачи подотчетных денег сотруднику

**Наследует:** BaseDocument

**Дополнительные поля (к полям BaseDocument):**
- `employee` (ForeignKey, Employee) - Сотрудник
- `cash_register` (ForeignKey, CashRegister) - Касса
- `amount` (DecimalField, max_digits=15, decimal_places=2) - Сумма выдачи
- `currency` (ForeignKey, Currency) - Валюта
- `purpose` (TextField) - Цель выдачи
- `is_closed` (BooleanField, default=False) - Закрыто
- `closed_at` (DateTimeField, null=True, blank=True) - Дата закрытия

**Примечание:** Дата выдачи хранится в поле `date` базовой модели BaseDocument

**Методы:**
- `close()` - Закрыть подотчетные средства
- `get_unreported_balance()` - Получить остаток неотчитанных средств

**Бизнес-логика:**
- При создании документа автоматически создается операция (Transaction) с отрицательной суммой (расход из кассы)
- Операция привязывается к документу через ForeignKey
- При редактировании документа операция обновляется, а не создается заново

---

#### 2.3.2. AdvanceReport (Авансовый отчет)
**Назначение:** Документ авансового отчета сотрудника по фактическим тратам

**Наследует:** BaseDocument

**Дополнительные поля (к полям BaseDocument):**
- `advance_payment` (ForeignKey, AdvancePayment) - Подотчетные средства
- `total_amount` (DecimalField) - Общая сумма расходов
- `return_amount` (DecimalField, default=0.00) - Сумма возврата (автоматически рассчитывается)
- `additional_payment` (DecimalField, default=0.00) - Сумма доплаты (автоматически рассчитывается)
- `currency` (ForeignKey, Currency) - Валюта
- `close_advance_payment` (BooleanField, default=True) - Закрыть подотчетные средства
- `manual_return_amount` (DecimalField, default=0.00) - Возврат денег (ручной)
- `manual_additional_payment` (DecimalField, default=0.00) - Дополнительная выдача (ручная)
- `status` (CharField, choices) - Статус: Черновик, Сдан, Подтвержден, Отклонен
- `approved_at` (DateTimeField, null=True, blank=True) - Дата подтверждения
- `approved_by` (ForeignKey, User, null=True, blank=True) - Подтверждено пользователем

**Методы:**
- `calculate_return_and_additional()` - Рассчитать сумму возврата и доплаты
- `approve(user)` - Подтвердить авансовый отчет

**Бизнес-логика:**
- Каждый документ выдачи денег (AdvancePayment) может быть закрыт одним или несколькими авансовыми отчетами
- При подтверждении отчета (status='confirmed'):
  - Создаются операции построчно по каждой строке отчета (AdvanceReportItem)
  - Создается операция возврата (если есть возврат)
  - Создается операция доплаты (если есть доплата)
  - Если `close_advance_payment=True`, подотчетные средства закрываются
  - Если `close_advance_payment=False` и есть доплата, создается новая выдача подотчетных средств
- **Только подтвержденные отчеты (status='confirmed') отражаются в движениях по остаткам**
- При редактировании подтвержденного отчета операции обновляются
- Общая сумма (`total_amount`) автоматически рассчитывается из суммы всех строк, если не заполнена
- Используются ручные суммы возврата/доплаты, если они указаны (отличны от 0)

---

#### 2.3.3. AdvanceReportItem (Строка авансового отчета)
**Назначение:** Строка авансового отчета с детализацией расходов

**Поля:**
- `report` (ForeignKey, AdvanceReport) - Авансовый отчет
- `item` (ForeignKey, IncomeExpenseItem) - Статья расходов
- `amount` (DecimalField) - Сумма
- `description` (TextField) - Описание (однострочное поле)
- `date` (DateTimeField) - Дата расхода
- `transaction` (OneToOneField, Transaction, null=True, blank=True) - Операция

**Требования:**
- Поле description должно быть однострочным в форме редактирования

---

### 2.4. Документы операций

Все документы операций наследуются от `BaseDocument`.

#### 2.4.1. IncomeDocument (Оприходование денег)
**Назначение:** Документ оприходования денежных средств в кассу

**Наследует:** BaseDocument

**Дополнительные поля (к полям BaseDocument):**
- `cash_register` (ForeignKey, CashRegister) - Касса
- `currency` (ForeignKey, Currency) - Валюта
- `amount` (DecimalField) - Сумма оприходования
- `item` (ForeignKey, IncomeExpenseItem) - Статья доходов
- `description` (TextField, blank=True) - Описание
- `employee` (ForeignKey, Employee, null=True, blank=True) - Сотрудник (если применимо)

**Бизнес-логика:**
- При создании документа автоматически создается операция (Transaction) с положительной суммой (поступление в кассу)
- Операция привязывается к документу через ForeignKey
- При редактировании документа операция обновляется, а не создается заново

---

#### 2.4.2. ExpenseDocument (Расход денег)
**Назначение:** Документ расхода денежных средств из кассы

**Наследует:** BaseDocument

**Дополнительные поля (к полям BaseDocument):**
- `cash_register` (ForeignKey, CashRegister) - Касса
- `currency` (ForeignKey, Currency) - Валюта
- `amount` (DecimalField) - Сумма расхода
- `item` (ForeignKey, IncomeExpenseItem) - Статья расходов
- `description` (TextField, blank=True) - Описание
- `employee` (ForeignKey, Employee, null=True, blank=True) - Сотрудник (если применимо)

**Бизнес-логика:**
- При создании документа автоматически создается операция (Transaction) с отрицательной суммой (расход из кассы)
- Операция привязывается к документу через ForeignKey
- При редактировании документа операция обновляется, а не создается заново

---

### 2.5. Журнал операций

#### 2.5.1. Transaction (Операция / Журнал операций)
**Назначение:** Общий журнал операций со ссылками на документы, физические лица, валюты, статьи расходов и доходов

**Наследует:** BaseOperationRegister

**Дополнительные поля (к полям BaseOperationRegister):**
- `transaction_type` (CharField, choices) - Тип операции:
  - 'income' - Оприходование денег
  - 'expense' - Расход денег
  - 'advance_payment' - Выдача подотчетных
  - 'advance_report' - Авансовый отчет (строка отчета)
  - 'advance_return' - Возврат денег сотрудником
  - 'advance_additional' - Доплата по авансовому отчету
  - 'transfer' - Перемещение между кассами
  - 'conversion' - Конвертация валют
- `cash_register` (ForeignKey, CashRegister) - Касса
- `currency` (ForeignKey, Currency) - Валюта
- `item` (ForeignKey, IncomeExpenseItem, null=True, blank=True) - Статья доходов/расходов
- `employee` (ForeignKey, Employee, null=True, blank=True) - Физическое лицо (сотрудник)
- `income_document` (ForeignKey, IncomeDocument, null=True, blank=True) - Документ оприходования
- `expense_document` (ForeignKey, ExpenseDocument, null=True, blank=True) - Документ расхода
- `advance_payment` (ForeignKey, AdvancePayment, null=True, blank=True) - Выдача подотчетных средств
- `advance_report` (ForeignKey, AdvanceReport, null=True, blank=True) - Авансовый отчет
- `advance_report_item` (ForeignKey, AdvanceReportItem, null=True, blank=True) - Строка авансового отчета

**Требования:**
- Наследует все поля и поведение от BaseOperationRegister
- Операции привязываются к документам, а не наоборот
- Несколько операций могут быть привязаны к одному документу
- Дата операции устанавливается по дате документа
- Сумма может быть положительной (поступление) или отрицательной (расход)
- Операции из подтвержденных авансовых отчетов отражаются в движениях по остаткам
- Используется для расчета остатков в регистре накоплений

**Индексы:**
- По полям: date, cash_register, currency
- По полям: transaction_type, date
- По полям: employee, date

---

#### 2.5.2. CashTransfer (Перемещение между кассами)
**Назначение:** Документ перемещения денежных средств между кассами

**Наследует:** BaseDocument

**Дополнительные поля (к полям BaseDocument):**
- `from_cash_register` (ForeignKey, CashRegister) - Из кассы
- `to_cash_register` (ForeignKey, CashRegister) - В кассу
- `currency` (ForeignKey, Currency) - Валюта
- `amount` (DecimalField) - Сумма

**Бизнес-логика:**
- При создании документа создаются две операции:
  - Операция списания из исходной кассы (отрицательная сумма)
  - Операция поступления в целевую кассу (положительная сумма)

---

#### 2.5.3. CurrencyConversion (Конвертация валют)
**Назначение:** Документ конвертации валют

**Наследует:** BaseDocument

**Дополнительные поля (к полям BaseDocument):**
- `from_currency` (ForeignKey, Currency) - Из валюты
- `to_currency` (ForeignKey, Currency) - В валюту
- `cash_register` (ForeignKey, CashRegister) - Касса
- `from_amount` (DecimalField) - Сумма в исходной валюте
- `to_amount` (DecimalField) - Сумма в целевой валюте
- `exchange_rate` (DecimalField) - Курс обмена

**Бизнес-логика:**
- При создании документа создаются две операции:
  - Операция списания исходной валюты (отрицательная сумма)
  - Операция поступления целевой валюты (положительная сумма)

---

## 3. Интерфейс пользователя

### 3.1. Django Admin

#### 3.1.1. Общие требования
- Интерфейс на русском языке
- Все модели зарегистрированы в админке
- Поддержка фильтров и поиска
- Использование `raw_id_fields` для оптимизации при большом количестве записей
- Использование `autocomplete_fields` где необходимо

#### 3.1.2. Справочники
- **Currency:** Фильтр по активности, поиск по коду и названию
- **CashRegister:** Отображение остатков по валютам в списке, фильтр по активности
- **IncomeExpenseItem:** Фильтр по типу и активности, поддержка иерархии
- **Employee:** Фильтр по активности, поиск по ФИО и должности

#### 3.1.3. Документы
- **IncomeDocument (Оприходование денег):**
  - Фильтр по кассе, валюте, статье доходов, сотруднику
  - Автоматическое создание/обновление операции при сохранении
  
- **ExpenseDocument (Расход денег):**
  - Фильтр по кассе, валюте, статье расходов, сотруднику
  - Автоматическое создание/обновление операции при сохранении

- **AdvancePayment:**
  - Отображение остатка неотчитанных средств в списке
  - Фильтр по сотруднику, валюте, статусу закрытия
  - Автоматическое создание/обновление операции при сохранении
  
- **AdvanceReport:**
  - Отображение сумм возврата и доплаты в списке
  - Фильтр по сотруднику, статусу, валюте
  - Inline-редактирование строк отчета
  - Поле description в строках - однострочное
  - Автоматический расчет общей суммы из строк
  - Действие для массового подтверждения отчетов
  - Поля для управления закрытием подотчетных средств и ручного указания сумм
  - **Только подтвержденные отчеты отражаются в движениях по остаткам**

- **Transaction (Журнал операций):**
  - Отображение всех связей с документами (income_document, expense_document, advance_payment, advance_report)
  - Отображение физического лица (employee)
  - Отображение валюты и статьи доходов/расходов
  - Фильтры по типу, валюте, кассе, дате, сотруднику, статье
  - Иерархия дат для навигации
  - Поиск по описанию

---

## 4. Бизнес-логика

### 4.1. Выдача подотчетных средств

**Процесс:**
1. Создается документ AdvancePayment
2. Автоматически создается операция Transaction:
   - Тип: 'advance_payment'
   - Сумма: отрицательная (расход из кассы)
   - Дата: дата документа (date_issued)
   - Привязка к документу через ForeignKey
3. При редактировании документа операция обновляется, а не создается заново

---

### 4.2. Авансовый отчет

**Процесс подтверждения:**
1. При установке статуса 'confirmed' (Подтвержден):
   - Рассчитываются суммы возврата и доплаты
   - Создаются операции по каждой строке отчета (построчно) - только для подтвержденных отчетов
   - Создается операция возврата (если есть возврат)
   - Создается операция доплаты (если есть доплата)
   - Если `close_advance_payment=True`, подотчетные средства закрываются
   - Если `close_advance_payment=False` и есть доплата, создается новая выдача подотчетных средств
   - **Операции отражаются в движениях по остаткам**

2. При редактировании подтвержденного отчета:
   - Операции по строкам обновляются
   - Операции возврата/доплаты обновляются
   - Удаляются операции для удаленных строк

3. При изменении статуса с 'confirmed' на другой:
   - Операции остаются в журнале, но не влияют на остатки (или удаляются - уточнить)

**Расчет сумм:**
- Общая сумма (`total_amount`) автоматически рассчитывается из суммы всех строк, если не заполнена
- Сумма возврата (`return_amount`) = выданная сумма - общая сумма расходов (если расходы меньше)
- Сумма доплаты (`additional_payment`) = общая сумма расходов - выданная сумма (если расходы больше)
- Используются ручные суммы (`manual_return_amount`, `manual_additional_payment`), если они указаны

**Закрытие выдачи подотчетных средств:**
- Каждый документ выдачи денег (AdvancePayment) может быть закрыт одним или несколькими авансовыми отчетами
- Выдача считается закрытой, когда сумма всех подтвержденных отчетов по ней равна сумме выдачи (с учетом возвратов и доплат)

---

### 4.3. Расчет остатков

**Остатки по кассам:**
- Рассчитываются на основе всех операций (Transaction) по кассе и валюте
- Поддерживается расчет на определенную дату
- Метод: `CashRegister.get_balance(currency, date=None)`
- Остатки хранятся в системе и рассчитываются динамически на основе операций

**Остатки по выданным авансам сотрудникам:**
- Рассчитываются на основе выданных сумм минус суммы подтвержденных отчетов
- Метод: `Employee.get_advance_balance(currency)` - остаток по сотруднику в указанной валюте
- Метод: `AdvancePayment.get_unreported_balance()` - остаток неотчитанных средств по конкретной выдаче
- Остатки хранятся в системе и рассчитываются динамически на основе операций
- **Учитываются только операции из подтвержденных авансовых отчетов**

---

## 5. Отчеты

### 5.1. Отчет по остаткам касс
**Назначение:** Просмотр остатков по всем кассам и валютам на определенную дату

**Функциональность:**
- Форма выбора даты отчета
- Таблица с остатками по кассам и валютам
- Строка итогов по каждой валюте
- Отображение нулевых остатков

**URL:** `/reports/cash-balance/`

---

## 6. Технические требования

### 6.1. База данных

**Разработка:**
- Использование SQLite для разработки и тестирования
- SQLite встроена в Python, не требует дополнительной установки
- Настройка через `settings.py`:
  ```python
  DATABASES = {
      'default': {
          'ENGINE': 'django.db.backends.sqlite3',
          'NAME': BASE_DIR / 'db.sqlite3',
      }
  }
  ```

**Промышленное применение:**
- Использование PostgreSQL для промышленного применения
- Требуется установка PostgreSQL и драйвера `psycopg2` или `psycopg2-binary`
- Настройка через `settings.py`:
  ```python
  DATABASES = {
      'default': {
          'ENGINE': 'django.db.backends.postgresql',
          'NAME': 'fin_count',
          'USER': 'user',
          'PASSWORD': 'password',
          'HOST': 'localhost',
          'PORT': '5432',
      }
  }
  ```
- Переключение между базами данных осуществляется через переменные окружения или настройки в `settings.py`
- Все модели должны быть совместимы с обеими базами данных (использование только стандартных типов полей Django)

### 6.2. Производительность
- Индексы на часто используемых полях
- Оптимизация запросов через select_related/prefetch_related
- Использование raw_id_fields для больших таблиц
- Учет особенностей производительности PostgreSQL при больших объемах данных

### 6.3. Безопасность
- Валидация данных на уровне моделей
- Защита от SQL-инъекций (ORM Django)
- Контроль доступа через Django Admin
- Безопасное хранение учетных данных базы данных (переменные окружения)

### 6.4. Масштабируемость
- Абстрактные модели для переиспользования
- Модульная структура приложения
- Возможность расширения функциональности
- Поддержка миграций для обеих баз данных

---

## 7. Этапы реализации

### Этап 1: Абстрактные базовые модели и справочники
- [ ] BaseDocument (Документ) - абстрактная модель
- [ ] BaseOperationRegister (Регистр операций) - абстрактная модель
- [ ] BaseAccumulationRegister (Регистр накоплений) - абстрактная модель
- [ ] BaseReference (Справочники) - абстрактная модель
- [ ] Справочники (Currency, CashRegister, IncomeExpenseItem, Employee) - наследуются от BaseReference
- [ ] Модель Transaction - наследуется от BaseOperationRegister
- [ ] Базовые методы расчета остатков (используют регистр накоплений)

### Этап 2: Документы
- [ ] IncomeDocument (Оприходование денег)
- [ ] ExpenseDocument (Расход денег)
- [ ] AdvancePayment (Выдача подотчетных средств)
- [ ] AdvanceReport (Авансовый отчет)
- [ ] AdvanceReportItem (Строки отчета)
- [ ] CashTransfer (Перемещение между кассами)
- [ ] CurrencyConversion (Конвертация валют)

### Этап 3: Бизнес-логика
- [ ] Автоматическое создание операций при создании документов (IncomeDocument, ExpenseDocument, AdvancePayment)
- [ ] Логика подтверждения авансовых отчетов (только подтвержденные отражаются в остатках)
- [ ] Расчет возврата и доплаты
- [ ] Управление закрытием подотчетных средств (один документ выдачи может закрываться несколькими отчетами)
- [ ] Расчет остатков по кассам и по выданным авансам

### Этап 4: Интерфейс
- [ ] Регистрация всех моделей в админке
- [ ] Настройка фильтров и поиска
- [ ] Inline-редактирование
- [ ] Автоматический расчет сумм в формах

### Этап 5: Отчеты
- [ ] Отчет по остаткам касс
- [ ] Другие отчеты (при необходимости)

---

## 8. Примечания

- Все даты операций устанавливаются по дате документа
- Операции привязываются к документам, а не наоборот
- Поддержка мультивалютного учета обязательна
- Интерфейс полностью на русском языке
- Проект работает в режиме отладки с доступом на всех IP-адресах
- **Остатки хранятся в системе по кассам и по выданным авансам сотрудникам**
- **Только подтвержденные авансовые отчеты отражаются в движениях по остаткам**
- **Каждый документ выдачи денег закрывается одним или несколькими авансовыми отчетами**
- **Журнал операций (Transaction) - это общий журнал со ссылками на документы, физические лица, валюты, статьи расходов и доходов**

---

**Статус документа:** Черновик  
**Дата последнего обновления:** 2024

